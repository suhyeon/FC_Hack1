<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>ShowMetheN Admin</title>
    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom fonts for this template -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <!-- Plugin CSS -->
    <link href="vendor/datatables/dataTables.bootstrap4.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="css/sb-admin.css" rel="stylesheet">
  </head>

  <body class="fixed-nav" id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
      <a class="navbar-brand" href="index.html">Show Me the N - Admin</a>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav navbar-sidenav">
          <li class="nav-item active" data-toggle="tooltip" data-placement="right" title="Dashboard">
            <a class="nav-link" href="adminList.html">
              <i class="fa fa-fw fa-dashboard"></i>
              <span class="nav-link-text">
                매장등록</span>
            </a>
          </li>          
          <li class="nav-item active" data-toggle="tooltip" data-placement="right" title="Dashboard">
              <a class="nav-link" href="index.html">
                <i class="fa fa-fw fa-dashboard"></i>
                <span class="nav-link-text">
                  매장리스트</span>
              </a>
            </li>          
        </ul>
        
        <ul class="navbar-nav ml-auto">          
          <li class="nav-item">
            <form class="form-inline my-2 my-lg-0 mr-lg-2">
              <div class="input-group">
                <input type="text" class="form-control" placeholder="Search for...">
                <span class="input-group-btn">
                  <button class="btn btn-primary" type="button">
                    <i class="fa fa-search"></i>
                  </button>
                </span>
              </div>
            </form>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="modal" data-target="#exampleModal">
              <i class="fa fa-fw fa-sign-out"></i>
              Logout</a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="content-wrapper py-3">
      <div class="container-fluid">

        <div class="card mb-3">
          <div class="card-header">
            <i class="fa fa-table"></i>
            Store List
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-bordered" width="100%" id="dataTable" cellspacing="0">
                <thead>
                  <tr>
                    <th></th>
                    <th>매장명</th>
                    <th>메뉴1</th>
                    <th>금액</th>
                    <th>메뉴2</th>
                    <th>금액2</th>
                    <th>메뉴3</th>
                    <th>금액3</th>
                    <th>주소</th>
                  </tr>
                </thead>
                <tbody>
                </tbody>
              </table>
            </div>
          </div>
          
        </div>

      </div>
      <!-- /.container-fluid -->
    </div>
    <!-- /.content-wrapper -->
    <script >
  function viewList(){
  var Mstore;
  var tbody = document.querySelector('tbody');
  var xhr = new XMLHttpRequest();
  var regx = /\B(?=(\d{3})+(?!\d))/g;
  xhr.open('get','/ShowMeTheMoney',true);
  xhr.send(null);
  xhr.onreadystatechange = function(){
    if(xhr.readyState===4){
       if(xhr.status===200){
       Mstore = JSON.parse(xhr.responseText);
       console.log(Mstore);
        Mstore.map(function(el,i){
        tbody.insertAdjacentHTML('beforeend',`<tr>
        <td><input type="checkbox" id=`+Mstore[i].id+`></td>
        <td>`+Mstore[i].store+`</td>
        <td>`+Mstore[i].menu1+`</td>
        <td>`+Mstore[i].price1.toString().replace(regx, ",")+`</td>
        <td>`+Mstore[i].menu2+`</td>
        <td>`+Mstore[i].price2.toString().replace(regx, ",")+`</td>
        <td>`+Mstore[i].menu3+`</td>
        <td>`+Mstore[i].price3.toString().replace(regx, ",")+`</td>
        <td>`+Mstore[i].addr+`</td>
        </tr>`);
        });
      }
    }
  }
}
      viewList();
    </script>
  </body>
</html>
